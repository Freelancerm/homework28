# –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ E-commerce –Ω–∞ –û—Å–Ω–æ–≤—ñ –ü–æ–¥—ñ–π üõçÔ∏è

–¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î **–ø–æ–¥—ñ—î–≤–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É (Event-Driven Architecture)** –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ—ó –∫–æ–º–µ—Ä—Ü—ñ—ó, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `EventBus` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –º—ñ–∂ —Å–µ—Ä–≤—ñ—Å–∞–º–∏. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ, —è–∫-–æ—Ç –æ–±—Ä–æ–±–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å, —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞, –∞ —Ç–∞–∫–æ–∂ —ñ–º—ñ—Ç—É—î —à–∞–±–ª–æ–Ω **Saga** –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π.

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **FastAPI** —è–∫ –≤–µ–±—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–∞ –≤–∫–ª—é—á–∞—î —Ä—ñ–∑–Ω—ñ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏, —è–∫—ñ —Ä–µ–∞–≥—É—é—Ç—å –Ω–∞ –ø–æ–¥—ñ—ó, –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ –≤ `EventBus`.

## üìö –ó–º—ñ—Å—Ç

1.  [üöÄ –ö–ª—é—á–æ–≤—ñ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#-–∫–ª—é—á–æ–≤—ñ-–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ)
2.  [üõ†Ô∏è –°—Ç–µ–∫ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ–π](#Ô∏è-—Å—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π)
3.  [üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ—î–∫—Ç—É)
4.  [üì¶ –ü–æ—á–∞—Ç–æ–∫ –†–æ–±–æ—Ç–∏](#-–ø–æ—á–∞—Ç–æ–∫-—Ä–æ–±–æ—Ç–∏)
    * [–ü–µ—Ä–µ–¥—É–º–æ–≤–∏](#–ø–µ—Ä–µ–¥—É–º–æ–≤–∏)
    * [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
    * [–õ–æ–∫–∞–ª—å–Ω–∏–π –ó–∞–ø—É—Å–∫ (In-Memory EventBus)](#–ª–æ–∫–∞–ª—å–Ω–∏–π-–∑–∞–ø—É—Å–∫-in-memory-eventbus)
5.  [üêá –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ RabbitMQ](#-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è-–∑-rabbitmq)
    * [1. –ó–∞–ø—É—Å–∫ RabbitMQ —á–µ—Ä–µ–∑ Docker Compose](#1-–∑–∞–ø—É—Å–∫-rabbitmq-—á–µ—Ä–µ–∑-docker-compose)
    * [2. –ó–∞–ø—É—Å–∫ Producer](#2-–∑–∞–ø—É—Å–∫-producer)
    * [3. –ó–∞–ø—É—Å–∫ Worker-—ñ–≤ (–°–ø–æ–∂–∏–≤–∞—á—ñ–≤)](#3-–∑–∞–ø—É—Å–∫-worker-—ñ–≤-—Å–ø–æ–∂–∏–≤–∞—á—ñ–≤)
6.  [üî• –Ü–º—ñ—Ç–∞—Ü—ñ—è Saga –Ω–∞ Kafka](#-—ñ–º—ñ—Ç–∞—Ü—ñ—è-saga-–Ω–∞-kafka)


***

## üöÄ –ö–ª—é—á–æ–≤—ñ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

* **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –û–±—Ä–æ–±–∫–∞ –ü–æ–¥—ñ–π:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–∞—Å—Ç–æ–º–Ω–∞ **`EventBus`** —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è —Ä–æ–∑'—î–¥–Ω–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó.
* **–û–±—Ä–æ–±–∫–∞ –ó–∞–º–æ–≤–ª–µ–Ω—å:** –Ü–º—ñ—Ç—É—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ø–æ–¥—ñ—ó –æ–ø–ª–∞—Ç–∏, —â–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å —Ä–µ–∞–∫—Ü—ñ—é —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤.
* **–°–µ—Ä–≤—ñ—Å –°–ø–æ–≤—ñ—â–µ–Ω—å:** –ù–∞–¥—Å–∏–ª–∞—î email/SMS —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∫–ª—é—á–æ–≤–∏—Ö –ø–æ–¥—ñ–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –æ–ø–ª–∞—Ç–∞).
* **–°–µ—Ä–≤—ñ—Å –ê–Ω–∞–ª—ñ—Ç–∏–∫–∏:** –í—ñ–¥—Å—Ç–µ–∂—É—î –ø–æ–¥—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω—å —Ç–∞ –æ–ø–ª–∞—Ç, —â–æ–± –Ω–∞–¥–∞–≤–∞—Ç–∏ –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –¥—ñ—è–ª—å–Ω—ñ—Å—Ç—å e-commerce.
* **Event Sourcing (–°–ø—Ä–æ—â–µ–Ω–∏–π):** –î–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π (event replay) –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö —Ü—ñ–ª–µ–π, —ñ–º—ñ—Ç—É—é—á–∏ –±–∞–∑–æ–≤—É —Ñ–æ—Ä–º—É Event Sourcing.
* **Webhook Integration:** –ï–Ω–¥–ø–æ—ñ–Ω—Ç `/webhook/order` –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–∏—Å—Ç–µ–º.
* **–®–∞–±–ª–æ–Ω Saga (–Ü–º—ñ—Ç–æ–≤–∞–Ω–∏–π):** –†–µ–∞–ª—ñ–∑—É—î —à–∞–±–ª–æ–Ω **Saga** –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö —É —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è—Ö –º—ñ–∂ –∫—ñ–ª—å–∫–æ–º–∞ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ (—ñ–º—ñ—Ç–∞—Ü—ñ—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤–∏–π –ª–æ–≥).
* **RabbitMQ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):** –î–æ—Å—Ç—É–ø–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —à–∏–Ω–∏ –ø–æ–¥—ñ–π —ñ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **RabbitMQ** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —á–µ—Ä–≥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

***

## üõ†Ô∏è –°—Ç–µ–∫ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
| :--- | :--- | :--- |
| **–ë–µ–∫–µ–Ω–¥** | `Python 3.x`, `FastAPI`, `Uvicorn` | API —Ç–∞ –≤–µ–±—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Event Bus** | Custom In-Memory `EventBus`, `RabbitMQ` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è —Ç–∞ —á–µ—Ä–≥–∏ |
| **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å** | `queue`, `threading` | –†–æ–±–æ—á—ñ –ø–æ—Ç–æ–∫–∏ —Ç–∞ —Ñ–æ–Ω–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ |
| **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** | `Pydantic` | –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ |
| **RabbitMQ –ö–ª—ñ—î–Ω—Ç** | `pika` | –ó'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ —Ä–æ–±–æ—Ç–∞ –∑ RabbitMQ |
| **Saga Simulation** | `log_storage.FileProducer` | –Ü–º—ñ—Ç–∞—Ü—ñ—è –±—Ä–æ–∫–µ—Ä–∞ Kafka –¥–ª—è Saga |

***

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É

–ü—Ä–æ—î–∫—Ç –º–∞—î —á—ñ—Ç–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —â–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ –ø–æ–¥—ñ—î–≤–æ–≥–æ –æ–±–º—ñ–Ω—É.
```
‚îú‚îÄ‚îÄ app.py                  # FastAPI application (–æ–±—Ä–æ–±–Ω–∏–∫ webhook)
‚îú‚îÄ‚îÄ run_server.py           # –ó–∞–ø—É—Å–∫–∞—î FastAPI —Å–µ—Ä–≤–µ—Ä —Ç–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π EventBus –≤–æ—Ä–∫–µ—Ä
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—É
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îî‚îÄ‚îÄ event_bus.py        # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è EventBus (In-Memory)
‚îú‚îÄ‚îÄ ecommerce/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –°—Ü–µ–Ω–∞—Ä—ñ–π —ñ–º—ñ—Ç–∞—Ü—ñ—ó E-commerce —Ä–æ–±–æ—á–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É
‚îÇ   ‚îú‚îÄ‚îÄ notification_service.py # –§—É–Ω–∫—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É —Å–ø–æ–≤—ñ—â–µ–Ω—å
‚îÇ   ‚îú‚îÄ‚îÄ analytics_service.py  # –§—É–Ω–∫—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ order_service.py      # –§—É–Ω–∫—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É –∑–∞–º–æ–≤–ª–µ–Ω—å
‚îÇ   ‚îî‚îÄ‚îÄ worker.py           # –§—É–Ω–∫—Ü—ñ—ó, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –≤–æ—Ä–∫–µ—Ä–æ–º
‚îú‚îÄ‚îÄ eventbus/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è EventBus
‚îÇ   ‚îî‚îÄ‚îÄ listeners.py        # –ü—Ä–∏–∫–ª–∞–¥–∏ —Å–ª—É—Ö–∞—á—ñ–≤ –ø–æ–¥—ñ–π
‚îú‚îÄ‚îÄ rabbitmq/
‚îÇ   ‚îú‚îÄ‚îÄ analytics_worker.py # –í–æ—Ä–∫–µ—Ä –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (—Å–ø–æ–∂–∏–≤–∞—á RabbitMQ)
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yaml # –§–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫—É RabbitMQ
‚îÇ   ‚îú‚îÄ‚îÄ email_worker.py     # –í–æ—Ä–∫–µ—Ä –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å (—Å–ø–æ–∂–∏–≤–∞—á RabbitMQ)
‚îÇ   ‚îî‚îÄ‚îÄ producer.py         # Producer –ø–æ–¥—ñ–π RabbitMQ
‚îú‚îÄ‚îÄ kafka/
‚îÇ   ‚îú‚îÄ‚îÄ saga_producer.py    # –Ü–º—ñ—Ç–∞—Ü—ñ—è —à–∞–±–ª–æ–Ω—É Kafka Saga
‚îÇ   ‚îî‚îÄ‚îÄ log_storage.py      # –§–∞–π–ª–æ–≤–∏–π message producer (—ñ–º—ñ—Ç–∞—Ü—ñ—è Kafka)
‚îú‚îÄ‚îÄ .env                    # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–∑–∞–∑–≤–∏—á–∞–π)
‚îú‚îÄ‚îÄ events.log              # –õ–æ–≥–∏ –ø–æ–¥—ñ–π (–∑–∞–∑–≤–∏—á–∞–π)
‚îî‚îÄ‚îÄ README.md               # –¶–µ–π —Ñ–∞–π–ª
```
***

## üì¶ –ü–æ—á–∞—Ç–æ–∫ –†–æ–±–æ—Ç–∏

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

* **Python 3.7+**
* **Pip** –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç—ñ–≤
* (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) **Docker** —Ç–∞ **Docker Compose** (–¥–ª—è RabbitMQ)

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1.  –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
    ```bash
    git clone https://github.com/Freelancerm/homework28.git
    cd homework28
    ```

2.  –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # –ù–∞ Linux/macOS
    venv\Scripts\activate     # –ù–∞ Windows
    ```

3.  –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
    ```bash
    pip install -r requirements.txt
    ```

### –õ–æ–∫–∞–ª—å–Ω–∏–π –ó–∞–ø—É—Å–∫ (In-Memory EventBus)

1.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ç–∞ –≤–æ—Ä–∫–µ—Ä:**

    ```bash
    python run_server.py
    ```

    –¶–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å **FastAPI** —Å–µ—Ä–≤–µ—Ä (`http://localhost:8000`) —Ç–∞ —Ñ–æ–Ω–æ–≤–∏–π –≤–æ—Ä–∫–µ—Ä, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î –ø–æ–¥—ñ—ó –∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ `EventBus` (In-Memory).

2.  **–ù–∞–¥—ñ—à–ª—ñ—Ç—å Webhook –ü–æ–¥—ñ—ó (–ü—Ä–∏–∫–ª–∞–¥):**

    –í–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ POST-–∑–∞–ø–∏—Ç–∏ –¥–æ `/webhook/order`, —â–æ–± —ñ–º—ñ—Ç—É–≤–∞—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

    ```bash
    curl -X POST -H "Content-Type: application/json" -d '{"order_id": 123, "status": "created"}' http://localhost:8000/webhook/order
    ```

3.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –Ü–º—ñ—Ç–∞—Ü—ñ—é E-commerce:**

    ```bash
    python ecommerce/main.py
    ```

    –¶–µ–π —Å–∫—Ä–∏–ø—Ç —ñ–º—ñ—Ç—É—î —Ä–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å, –≥–µ–Ω–µ—Ä—É—é—á–∏ –ø–æ–¥—ñ—ó, –ø–æ–≤'—è–∑–∞–Ω—ñ —ñ–∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏.

***

## üêá –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ RabbitMQ

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **RabbitMQ** —è–∫ —à–∏–Ω–∏ –ø–æ–¥—ñ–π –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏.

### 1. –ó–∞–ø—É—Å–∫ RabbitMQ —á–µ—Ä–µ–∑ Docker Compose

–î–ª—è –∑–∞–ø—É—Å–∫—É RabbitMQ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ–∞–π–ª **`rabbitmq/docker-compose.yaml`**:

```yaml
version: '3.8'

services:
  rabbitmq:
    image: rabbitmq:3.12-management
    container_name: rabbitmq
    ports:
      - "5672:5672" # AMQP port (–¥–ª—è –∑'—î–¥–Ω–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤)
      - "15672:15672" # Management UI port (–¥–ª—è –≤–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É)
    environment:
      RABBITMQ_DEFAULT_USER: guest
      RABBITMQ_DEFAULT_PASS: guest
    healthcheck:
      test: ["CMD", "rabbitmq-diagnostics", "check_port_connectivity"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: always
```
1.  **–ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó ```rabbitmq/```:**

    ```bash
    cd rabbitmq
    ```

2.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å RabbitMQ::**

    ```bash
    docker-compose up -d
    ```
    RabbitMQ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ ```localhost:5672```. –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è: 
**http://localhost:15672** (guest/guest).

3.  –©–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ RabbitMQ:
    ```bash
    docker-compose down
    ```

### 2. –ó–∞–ø—É—Å–∫ Producer
Producer –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—é –ø–æ–¥—ñ–π —É RabbitMQ.

 * –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à **RabbitMQ** —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π (–ö—Ä–æ–∫ 1).

 * –ó–∞–ø—É—Å—Ç—ñ—Ç—å **RabbitMQ** producer –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É:
```bash
 python rabbitmq/producer.py 
 ```
–¶–µ–π —Å–∫—Ä–∏–ø—Ç —ñ–Ω—ñ—Ü—ñ—é—î —Ä–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å E-commerce, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—á–∏ –ø–æ–¥—ñ—ó –¥–æ RabbitMQ.

### 3. –ó–∞–ø—É—Å–∫ Worker-—ñ–≤ (–°–ø–æ–∂–∏–≤–∞—á—ñ–≤)
–í–æ—Ä–∫–µ—Ä–∏ (—Å–ø–æ–∂–∏–≤–∞—á—ñ) –æ—Ç—Ä–∏–º—É—é—Ç—å —Ç–∞ –æ–±—Ä–æ–±–ª—è—é—Ç—å –ø–æ–¥—ñ—ó –∑ RabbitMQ.

* –ó–∞–ª–∏—à—Ç–µ **Producer** –∑–∞–ø—É—â–µ–Ω–∏–º.

* –í—ñ–¥–∫—Ä–∏–π—Ç–µ **–Ω–æ–≤—ñ** —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞.

1. **–ó–∞–ø—É—Å–∫ Analytics Worker:**
```bash
python rabbitmq/analytics_worker.py
```
2. **–ó–∞–ø—É—Å–∫ Email Worker:**
```bash
python rabbitmq/email_worker.py
```
–ö–æ–∂–µ–Ω –≤–æ—Ä–∫–µ—Ä –±—É–¥–µ —Å–ª—É—Ö–∞—Ç–∏ —Å–≤–æ—é —á–µ—Ä–≥—É —Ç–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–¥—ñ—ó, –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ Producer-–æ–º.

## üî• –Ü–º—ñ—Ç–∞—Ü—ñ—è Saga –Ω–∞ Kafka
–¶–µ–π —Ä–æ–∑–¥—ñ–ª –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —ñ–º—ñ—Ç–∞—Ü—ñ—é –ø–∞—Ç–µ—Ä–Ω—É **Saga** –¥–ª—è —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π.
1. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –Ü–º—ñ—Ç–∞—Ü—ñ—é Saga:**
```bash
python kafka/saga_producer.py
```
–¶–µ —ñ–º—ñ—Ç—É–≤–∞—Ç–∏–º–µ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é, –∑–∞–ø–∏—Å—É—é—á–∏ –∫—Ä–æ–∫–∏ —É —Ñ–∞–π–ª ```events.log```, —ñ–º—ñ—Ç—É—é—á–∏ –ª–æ–≥ Kafka.